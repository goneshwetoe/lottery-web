<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myanmar 2D Live | ARKARSOE.SYS</title>
    
    <!-- Stable CDN Links for Cross-Browser Compatibility -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        * { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* Loading Animation */
        @keyframes loading-slide { 
            0% { transform: translateX(-100%); } 
            100% { transform: translateX(100%); } 
        }
        .animate-loading { animation: loading-slide 2s infinite linear; }
        
        /* Number Animation Blur */
        .number-blur { filter: blur(8px); opacity: 0.5; transform: scale(1.05); }
        
        /* Hide scrollbar but allow scrolling */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-[#020617] selection:bg-cyan-500/30">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // --- Cross-Browser Lucide Icon Component ---
        const Icon = ({ name, size = 18, className = "" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={`inline-block ${className}`}></i>;
        };

        const MOCK_DATA = {
            "server_time": "2025-12-25 12:45:00",
            "live": { "set": "1,266.59", "value": "7,588.04", "time": "12:44:59", "twod": "98", "date": "2025-12-25" },
            "result": [
                { "set": "1,267.63", "value": "6,183.90", "open_time": "11:00:00", "twod": "33" },
                { "set": "1,266.59", "value": "7,585.40", "open_time": "12:01:00", "twod": "95" },
                { "set": "1,265.12", "value": "5,421.20", "open_time": "15:00:00", "twod": "20" },
                { "set": "1,266.00", "value": "8,112.44", "open_time": "16:30:00", "twod": "44" }
            ]
        };

        const LoadingScreen = ({ status }) => (
            <div className="fixed inset-0 z-[100] bg-[#020617] flex flex-col items-center justify-center px-6">
                <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 via-slate-950 to-slate-950"></div>
                <div className="relative z-10 flex flex-col items-center w-full max-w-xs text-center">
                    <div className="w-20 h-20 bg-cyan-500/10 border border-cyan-500/20 rounded-3xl flex items-center justify-center mb-8 shadow-[0_0_50px_rgba(6,182,212,0.15)] animate-pulse">
                        <Icon name="activity" size={40} className="text-cyan-400" />
                    </div>
                    <h1 className="text-2xl font-black text-white mb-3 tracking-tighter uppercase">Myanmar 2D Live</h1>
                    <div className="w-full h-1.5 bg-slate-900 rounded-full overflow-hidden mb-6">
                        <div className="h-full bg-cyan-500 animate-loading w-1/2"></div>
                    </div>
                    <p className="text-cyan-500 font-bold uppercase tracking-[0.2em] text-[10px] flex items-center gap-3">
                        <Icon name="loader-2" size={14} className="animate-spin" /> {status}
                    </p>
                </div>
            </div>
        );

        const App = () => {
            const [data, setData] = useState(null);
            const [displayTwod, setDisplayTwod] = useState('--');
            const [isReady, setIsReady] = useState(false);
            const [refreshing, setRefreshing] = useState(false);
            const [isAnimating, setIsAnimating] = useState(false);
            const [usingMock, setUsingMock] = useState(false);
            const [layout, setLayout] = useState('dark');
            const [loadStatus, setLoadStatus] = useState("စနစ်ကို စတင်နေပါသည်...");

            const animateNumber = (targetValue) => {
                if (!targetValue || targetValue === '--') return;
                setIsAnimating(true);
                let count = 0;
                const interval = setInterval(() => {
                    setDisplayTwod(Math.floor(Math.random() * 100).toString().padStart(2, '0'));
                    count++;
                    if (count > 15) {
                        clearInterval(interval);
                        setDisplayTwod(targetValue);
                        setIsAnimating(false);
                    }
                }, 50);
            };

            const fetchData = useCallback(async (isInitial = false) => {
                if (isInitial) setLoadStatus("ဒေတာများကို ချိတ်ဆက်နေပါသည်...");
                else setRefreshing(true);

                try {
                    const response = await fetch('https://api.thaistock2d.com/live');
                    const result = await response.json();
                    
                    if (result.live.twod !== data?.live?.twod) animateNumber(result.live.twod);
                    else if (!data) setDisplayTwod(result.live.twod);
                    
                    setData(result);
                    setUsingMock(false);
                    if (isInitial) setTimeout(() => setIsReady(true), 1800);
                } catch (err) {
                    setData(MOCK_DATA);
                    setDisplayTwod(MOCK_DATA.live.twod);
                    setUsingMock(true);
                    if (isInitial) setTimeout(() => setIsReady(true), 2500);
                } finally {
                    if (!isInitial) setTimeout(() => setRefreshing(false), 800);
                }
            }, [data]);

            useEffect(() => {
                fetchData(true);
                const interval = setInterval(() => fetchData(false), 15000);
                return () => clearInterval(interval);
            }, [fetchData]);

            const handleShare = () => {
                const text = `Myanmar 2D: ${displayTwod}\nTime: ${data?.live?.time}\nSET: ${data?.live?.set}\nSource: ARKARSOE.SYS`;
                if (navigator.share) {
                    navigator.share({ title: '2D Result', text });
                } else {
                    const el = document.createElement('textarea');
                    el.value = text;
                    document.body.appendChild(el);
                    el.select();
                    document.execCommand('copy');
                    document.body.removeChild(el);
                    // Custom notification logic could go here
                }
            };

            if (!isReady) return <LoadingScreen status={loadStatus} />;

            const themeClass = layout === 'dark' ? 'bg-[#020617] text-slate-200' : 'bg-[#f8fafc] text-slate-900';

            return (
                <div className={`min-h-screen transition-colors duration-500 pb-12 ${themeClass}`}>
                    
                    {/* Header */}
                    <header className={`sticky top-0 z-50 backdrop-blur-xl border-b px-5 py-4 flex justify-between items-center ${layout === 'dark' ? 'border-white/5 bg-slate-950/80' : 'border-slate-200 bg-white/90'}`}>
                        <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-cyan-500/10 rounded-xl flex items-center justify-center">
                                <Icon name="activity" size={22} className="text-cyan-500" />
                            </div>
                            <div>
                                <h2 className="text-sm font-black tracking-tight uppercase leading-none">ARKARSOE.SYS</h2>
                                <div className="flex items-center gap-1.5 text-[9px] font-bold mt-1.5 uppercase">
                                    <span className={`w-1.5 h-1.5 rounded-full ${usingMock ? 'bg-amber-500 animate-pulse' : 'bg-green-500'}`}></span>
                                    <span className={usingMock ? 'text-amber-500' : 'text-green-500'}>{usingMock ? 'Offline' : 'Live Connection'}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div className="flex gap-2">
                            <button onClick={() => setLayout(l => l === 'dark' ? 'light' : 'dark')} className={`p-2.5 rounded-full transition-all ${layout === 'dark' ? 'hover:bg-slate-800' : 'hover:bg-slate-200'}`}>
                                {layout === 'dark' ? <Icon name="sun" size={20} className="text-amber-400" /> : <Icon name="moon" size={20} className="text-slate-600" />}
                            </button>
                            <button onClick={() => fetchData()} className={`p-2.5 rounded-full transition-all ${refreshing ? 'animate-spin opacity-50' : ''} ${layout === 'dark' ? 'hover:bg-slate-800' : 'hover:bg-slate-200'}`}>
                                <Icon name="refresh-cw" size={20} className="text-cyan-500" />
                            </button>
                        </div>
                    </header>

                    <main className="max-w-md mx-auto p-5 space-y-8">
                        
                        {/* Big Live Card */}
                        <section className={`relative rounded-[3rem] border p-10 text-center overflow-hidden transition-all duration-500 ${layout === 'dark' ? 'bg-slate-900/40 border-white/5 shadow-2xl' : 'bg-white border-slate-200 shadow-xl'}`}>
                            <div className="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"></div>
                            
                            <div className={`text-[10rem] font-black leading-none tracking-tighter mb-10 transition-all duration-300 ${isAnimating ? 'number-blur' : 'text-transparent bg-clip-text bg-gradient-to-b from-white to-slate-600'} ${layout === 'light' ? 'from-slate-950 to-slate-500' : ''}`}>
                                {displayTwod}
                            </div>
                            
                            <div className="grid grid-cols-2 gap-4">
                                <div className={`p-4 rounded-2xl border transition-colors ${layout === 'dark' ? 'bg-slate-800/50 border-white/5' : 'bg-slate-50 border-slate-100'}`}>
                                    <span className="text-[10px] text-slate-500 block font-black uppercase mb-1 tracking-wider">SET Index</span>
                                    <span className={`text-lg font-black ${layout === 'dark' ? 'text-white' : 'text-slate-900'}`}>{data?.live?.set || '--'}</span>
                                </div>
                                <div className={`p-4 rounded-2xl border transition-colors ${layout === 'dark' ? 'bg-slate-800/50 border-white/5' : 'bg-slate-50 border-slate-100'}`}>
                                    <span className="text-[10px] text-slate-500 block font-black uppercase mb-1 tracking-wider">Value</span>
                                    <span className={`text-lg font-black ${layout === 'dark' ? 'text-white' : 'text-slate-900'}`}>{data?.live?.value || '--'}</span>
                                </div>
                            </div>
                            
                            <div className="mt-8 flex items-center justify-center gap-3 text-[11px] font-bold text-slate-500 bg-slate-500/5 py-2 px-4 rounded-full w-fit mx-auto">
                                <Icon name="clock" size={14} className="text-cyan-500" />
                                <span>Update: {data?.live?.time} ({data?.live?.date})</span>
                            </div>
                        </section>

                        {/* History Table */}
                        <section className="space-y-5">
                            <div className="flex justify-between items-center px-2">
                                <h3 className="text-[11px] font-black uppercase tracking-[0.2em] text-slate-500 flex items-center gap-3">
                                    <Icon name="bar-chart-3" size={16} className="text-cyan-500" /> History Results
                                </h3>
                                <button onClick={handleShare} className="text-[10px] font-bold text-cyan-500 flex items-center gap-2 hover:opacity-70 transition-opacity">
                                    <Icon name="share-2" size={14} /> SHARE
                                </button>
                            </div>

                            <div className={`overflow-hidden rounded-[2rem] border ${layout === 'dark' ? 'bg-slate-900/20 border-white/5' : 'bg-white border-slate-200 shadow-md'}`}>
                                <div className="overflow-x-auto no-scrollbar">
                                    <table className="w-full text-left border-collapse">
                                        <thead>
                                            <tr className={`${layout === 'dark' ? 'bg-white/5' : 'bg-slate-100/50'}`}>
                                                <th className="px-5 py-4 text-[10px] font-black uppercase text-slate-500 tracking-wider">Time</th>
                                                <th className="px-5 py-4 text-[10px] font-black uppercase text-slate-500 tracking-wider">SET</th>
                                                <th className="px-5 py-4 text-[10px] font-black uppercase text-slate-500 tracking-wider">Value</th>
                                                <th className="px-5 py-4 text-[10px] font-black uppercase text-cyan-500 text-right tracking-wider">2D</th>
                                            </tr>
                                        </thead>
                                        <tbody className={`divide-y ${layout === 'dark' ? 'divide-white/5' : 'divide-slate-100'}`}>
                                            {data?.result?.map((item, idx) => (
                                                <tr key={idx} className="hover:bg-cyan-500/5 transition-colors group">
                                                    <td className="px-5 py-5 text-[12px] font-bold opacity-80">{item.open_time}</td>
                                                    <td className="px-5 py-5 text-[12px] opacity-60 font-medium">{item.set}</td>
                                                    <td className="px-5 py-5 text-[12px] opacity-60 font-medium">{item.value}</td>
                                                    <td className="px-5 py-5 text-right">
                                                        <span className="text-xl font-black text-cyan-500 transition-transform group-hover:scale-110 inline-block">{item.twod}</span>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </section>

                        {/* Footer */}
                        <footer className="pt-8 text-center space-y-3 opacity-30">
                            <div className="flex justify-center gap-6 mb-2">
                                <Icon name="info" size={18} />
                                <Icon name="shield-check" size={18} />
                                <Icon name="database" size={18} />
                            </div>
                            <p className="text-[10px] font-bold uppercase tracking-[0.3em]">Arkarsoe System v2.2.0</p>
                        </footer>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
